# Числа

В современном JS существует 2 типа чисел:

1. Обычные числа хранятся в 64-битном формате IEEE-754, который также называют "числа с плавающей точкой двойной точности"
2. **BigInt** числа дают возможность работать с целыми числами произвольной длины, которые находятся в промежутке от -2^53 до 2^53

## Способы записи числа

Через букву "e" - заменяет количество нулей, которое указывает после **e**

```
  let billion = 1e9 // 1000000000
  
  let ms = 1e-6 //0.000001
```

## Шестнадцатеричные, двоичные и восьмеричные числа

Шестнадцатеричная запись: записываются через **0x**, далее после **x** указывается число
Двоичная запись: записываются через **0b**
Восьмеричная запись: записываются через **0o**

Есть только 3 системы счисления с такой поддержкой. Для других систем счисления рекомендуется использовать функцию **parseInt**

## toString(base)

Метод **num.toString(base)** возвращает строковое представление числа num в системе счисления **base**.

base=36 — максимальное основание

## Округление

- Math.floor - округление в меньшую сторону
- Math.ceil - округление в большую сторону
- Math.round - округление до ближайшего целого
- Math.trunc - удаление дробной части, без округления (не поддерживается в IE)

Если нужно округлить число до **n-ого** количества цифр в дробной части, то есть 2 решения пути

1. Умножить и разделить
2. toFixed(n) округляет число до **n** знаков после запятой и возвращает строку.

## Неточные вычисления

Внутри JS число представлено в виде 64-битного формата IEEE-754. Для хранения числа используется 64 бита: 52 из них используется для хранения цифт, 11 из них для хранения положения десятичной точки (если число целое, то хранится 0), и один бит отведен на хранение знака.

Если число слишком больше, оно переполнит 64-битное хранилище, то вернет бесконечность.

Наиболее часто встречающаяся ошибка при работе с числами в JavaScript – это потеря точности. Число хранится в памяти в бинарной форме. как последовательность бит - единиц и нулей. Но дроби, например, "0.1", "0.2", которые довольно просто выглядят в десятичной системе счисления, на самом деле являются бесконечной дробью в двоичной форме.

В JS нет возможности для хранения точных значений 0.1 или 0.2, используя двоичную систему.

Числовой формат IEEE-754 решает эту проблему путем округления до ближайшего возможного числа. Правила округления обычно не позволяют нам увидеть эту "крошечную потерю точности", но она существует.

### Как обойти эту проблему?

Наиболее надежный способ - округлить результат используя метод toFixed(n):

```
  let sum = 0.1 + 0.2;
  alert( sum.toFixed(2) ); // 0.30
```

toFixed возвращает строку, поэтому если необходимо число, то можно использовать унарный плюс, для перевода в число

Также можно умножить на 100, а после разделить обратно.

## Проверка: isFinite и isNaN

- isNaN(val) - проверяется на NaN
- isFinite(val) - преобразует аргумент в число и возвращает либо **true**, либо **false**. Используется для проверки, содержится ли в строке число.
  Помните, что пустая строка интерпретируется как 0 во всех числовых функциях, включая **isFinite**

### Сравнение Object.is

Существует специальный метод Object.is, который сравнивает значения примерно как **===**, но более надежен в двух особых ситуациях:

1. Работает с **NaN**: **Object.is(NaN, NaN) === true**
2. Значения **0** и **-0** разные: **Object.is(0, -0) === false**, это редко используется, но технически эти значения разные.

Во всех других случаях **Object.is(a, b)** идентичен **a === b**.

## parseInt и parseFloat

Бывает такое, что необъодимо получить числовое значение из строк вида: "100px", "12pt", лио какие-либо валютные значения, по типу "19€". Чтобы получить числовые значения из таких строк есть методы **parseInt**, **parseFloat**.

**parseInt** возвращает целое число, а **parseFloat** возвращает число с плавающей точкой.

Также **parseInt(str, radix)** - имеет второй параметр, который опередяет систему счисления.

## Другие математические функции

`Math.random()` - возвращает псевдослучайное число в диапазоне от 0 до 1

`Math.max(a, b, c...)` / `Math.min(a, b, c...)` - Возвращает наибольшее/наименьшее число из перечисленных аргументов.

`Math.pow(n, power)` - Возвращает число n, возведённое в степень `power`