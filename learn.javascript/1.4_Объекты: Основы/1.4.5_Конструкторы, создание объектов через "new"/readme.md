# Конструкторы, создание объектов через "new"

## Функция-конструктор

1. Имя функции-конструктора должно начинаться с большой буквы.
2. Функция-конструктор должна вызываться при помощи оператора "new".

Когда функция вызывается через оператор **new** происходит следующее:

1. Создается новый пустой объект, и он присваивается **this**
2. Выполняется код функции. Обычно он модифицирует **this**, добавляет туда новые свойства.
3. Возвращается значение **this**.

Основная цель конструкторов - удобное повторение создания однотипных объектов 

### new function() { … }

Такой конструктор не может быть вызван дважды, так как он нигде не сохраняется, просто создается и тут же вызывается. Таким образом, такой метод создания позволяет инкапсулировать код, который создает отдельный объект, но без возможности его повторного использования.

## Проверка на вызов в режиме конструктора: new.target

Используя специальное свойство new.target внутри функции, мы можем проверить, вызвана ли функция при помощи оператора new или без него.

```
  function User() {
    alert(new.target);
  }

  // без "new":
  User(); // undefined

  // с "new":
  new User(); // function User { ... }
```

Это можно использовать, чтобы отличить обычный вызов от вызова «в режиме конструктора».

## Возврат значения из конструктора return

Обычно конструкторы ничего не возвращают явно.

Но если есть **return**

- При вызове return c объектом, будет возвращен объект, а не **this**

- При вызове **return** с примитивным значением, примитивное значение будеот отброшено.

Другими словами, **return** с объектом возвращает объект, в любом другом случае конструктор вернёт **this**.

## Отсутствие скобок

Если нет аргументов, то можно вызвать конструктор без скобок, но это считается плохой практикой, но синтаксис позволяет такое.

## Создание методов в конструкторе

Можно передавать конструктору параметры, определяющие как создавать объект, и что в него записывать

В this можно добавлять не только свойства, но и методы.