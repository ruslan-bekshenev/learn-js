# Навигация по DOM-элементам

Все операции с DOM начинаются с объекта `document`. Это главная «точка входа» в DOM. Из него мы можем получить доступ к любому узлу.

## Сверху: documentElement и body

Самые верхние элементы дерева доступны как свойства объекта `document`:

`<html> = document.documentElement`

Самый верхний узел документа: `document.documentElement`. В DOM он соответствует тегу `<html>`.

`<body> = document.body`

Другой часто используемый DOM-узел – узел тега `<body>`: `document.body`.

`<head> = document.head`

Тег `<head>` доступен как `document.head`.

### `document.body` может быть равен `null`

Нельзя получить доступ к элементу, которого ещё не существует в момент выполнения скрипта.

В частности, если скрипт находится в `<head>`, document.body в нём недоступен, потому что браузер его ещё не прочитал.

### В мире DOM null означает «не существует»

## Дети: childNodes, firstChild, lastChild

- Дочерние узлы (или дети) – элементы, которые являются непосредственными детьми узла. Другими словами, элементы, которые лежат непосредственно внутри данного. Например, `<head>` и `<body>` являются детьми элемента `<html>`.
- Потомки – все элементы, которые лежат внутри данного, включая детей, их детей и т.д.


Коллекция `childNodes` содержит список всех детей, включая текстовые узлы.

Свойства `firstChild` и `lastChild` обеспечивают быстрый доступ к первому и последнему дочернему элементу.

Для проверки наличия дочерних узлов существует также специальная функция `elem.hasChildNodes()`.


## DOM-коллекции

1. Для перебора коллекции мы можем использовать for..of.
2. Методы массивов не будут работать, потому что коллекция – это не массив.

### DOM-коллекции – только для чтения

DOM-коллекции, и даже более – все навигационные свойства, доступны только для чтения.

### DOM-коллекции живые

Почти все DOM-коллекции, за небольшим исключением, живые. Другими словами, они отражают текущее состояние DOM.

Если мы сохраним ссылку на elem.childNodes и добавим/удалим узлы в DOM, то они появятся в сохранённой коллекции автоматически.

### Не используйте цикл `for..in` для перебора коллекций

## Соседи и родитель

Соседи – это узлы, у которых один и тот же родитель.

Следующий узел того же родителя (следующий сосед) – в свойстве `nextSibling`, а предыдущий – в `previousSibling`.

Родитель доступен через `parentNode`.

## Навигация только по элементам

Навигационные свойства, описанные выше, относятся ко всем узлам в документе. В частности, в `childNodes` находятся и текстовые узлы и узлы-элементы и узлы-комментарии, если они есть.

Но для большинства задач текстовые узлы и узлы-комментарии нам не нужны. Мы хотим манипулировать узлами-элементами, которые представляют собой теги и формируют структуру страницы.

- children – коллекция детей, которые являются элементами.
- firstElementChild, lastElementChild – первый и последний дочерний элемент.
- previousElementSibling, nextElementSibling – соседи-элементы.
- parentElement – родитель-элемент.

Свойство `parentElement` возвращает родитель-элемент, а parentNode возвращает «любого родителя». 

## Ещё немного ссылок: таблицы

Некоторые типы DOM-элементов предоставляют для удобства дополнительные свойства, специфичные для их типа.

Таблицы – отличный пример таких элементов.

Элемент <table>, в дополнение к свойствам, о которых речь шла выше, поддерживает следующие:

- `table.rows `– коллекция строк `<tr>` таблицы.
- `table.caption/tHead/tFoot` – ссылки на элементы таблицы `<caption>`, `<thead>`, `<tfoot>`.
- `table.tBodies`– коллекция элементов таблицы `<tbody>` (по спецификации их может быть больше одного).
`<thead>, <tfoot>, <tbody>` предоставляют свойство rows:

`tbody.rows` – коллекция строк `<tr>` секции.

`<tr>`:

`tr.cells` – коллекция `<td>` и `<th>` ячеек, находящихся внутри строки `<tr>`.
`tr.sectionRowIndex` – номер строки `<tr>` в текущей секции `<thead>/<tbody>/<tfoot>`.
`tr.rowIndex` – номер строки `<tr>` в таблице (включая все строки таблицы).
`<td>` and `<th>`:

`td.cellIndex` – номер ячейки в строке `<tr>`.